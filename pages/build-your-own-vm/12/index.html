<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Strings | My Dearest</title><meta name="author" content="Animenzzzzzz"><meta name="copyright" content="Animenzzzzzz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="What are Strings? This may shock you, but they are a bit more complicated than they might seem. Since a computer cares about bytes, it has no concept of the letter s, ! or any other letter. These h">
<meta property="og:type" content="article">
<meta property="og:title" content="Strings">
<meta property="og:url" content="https://animenzzzzzz.github.io/pages/build-your-own-vm/12/index.html">
<meta property="og:site_name" content="My Dearest">
<meta property="og:description" content="What are Strings? This may shock you, but they are a bit more complicated than they might seem. Since a computer cares about bytes, it has no concept of the letter s, ! or any other letter. These h">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://animenzzzzzz.github.io/img/avatar.jpg">
<meta property="article:published_time" content="2024-12-25T02:43:18.000Z">
<meta property="article:modified_time" content="2025-01-03T07:50:16.685Z">
<meta property="article:author" content="Animenzzzzzz">
<meta property="article:tag" content="virtual-machine">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://animenzzzzzz.github.io/img/avatar.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://animenzzzzzz.github.io/pages/build-your-own-vm/12/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>(()=>{
      const saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
      
      window.btf = {
        saveToLocal: saveToLocal,
        getScript: (url, attr = {}) => new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = url
          script.async = true
          script.onerror = reject
          script.onload = script.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            script.onload = script.onreadystatechange = null
            resolve()
          }

          Object.keys(attr).forEach(key => {
            script.setAttribute(key, attr[key])
          })

          document.head.appendChild(script)
        }),

        getCSS: (url, id = false) => new Promise((resolve, reject) => {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = url
          if (id) link.id = id
          link.onerror = reject
          link.onload = link.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            link.onload = link.onreadystatechange = null
            resolve()
          }
          document.head.appendChild(link)
        }),

        addGlobalFn: (key, fn, name = false, parent = window) => {
          const pjaxEnable = false
          if (!pjaxEnable && key.startsWith('pjax')) return

          const globalFn = parent.globalFn || {}
          const keyObj = globalFn[key] || {}
    
          if (name && keyObj[name]) return
    
          name = name || Object.keys(keyObj).length
          keyObj[name] = fn
          globalFn[key] = keyObj
          parent.globalFn = globalFn
        }
      }
    
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode
      
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Strings',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-01-03 15:50:16'
}</script><link rel="stylesheet" href="/css/font.css"><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">67</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/top_img.jpg);"><nav id="nav"><span id="blog-info"><a href="/" title="My Dearest"><span class="site-name">My Dearest</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Strings</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-12-25T02:43:18.000Z" title="发表于 2024-12-25 10:43:18">2024-12-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-01-03T07:50:16.685Z" title="更新于 2025-01-03 15:50:16">2025-01-03</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Computer/">Computer</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Computer/Virtual-Machine/">Virtual Machine</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Strings"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="what-are-strings">What are Strings?</h2>
<p>This may shock you, but they are a bit more complicated than they
might seem. Since a computer cares about bytes, it has no concept of the
letter <code>s</code>, <code>!</code> or any other letter. These having
meaning to us humans. But we want our users to be able to give input and
read output without having to do it all in hex. The solution is to use
some sort of character encoding. This maps a particular character to a
number. You’ll hear two common encodings mentioned these days: ASCII and
UTF. I’m not going to go into an exhaustive history of them; for that,
check out this article for ASCII and this article for UTF-8. I will
cover enough for us to put in support for strings, though.</p>
<h3 id="ascii">ASCII</h3>
<p>This is the older encoding, and can represent 256 different
characters. Most of the time, we use the first 128. <a
target="_blank" rel="noopener" href="https://www.ascii-code.com/">This page</a> has some good info on
it.</p>
<h3 id="utf-8">UTF-8</h3>
<p>With the limited number of characters in ASCII, representing Japanese
kanji, Klingon, and other languages that do not use the latin alphabet
is difficult. A UTF-8 character can use <strong>1 to 4
bytes</strong>.</p>
<h3 id="which-to-use">Which to use…​</h3>
<p>UTF-8! ASCII will be around for a long time, but new tech should use
UTF for their strings</p>
<h2 id="what-stored-strings-look-like">What Stored Strings Look
Like</h2>
<p>Now that we have a heap, we can start storing strings there. For now,
think of our heap as an array that can grow forever. If we have an empty
heap, the beginning might look like this:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<p>This heap can hold 12 bytes of data. Let’s say we want to store the
string <code>Hi</code> in our heap. In UTF, <code>H</code> is the number
<code>72</code>. <code>i</code> is the number <code>60</code>. If we
store that in our heap, it would look like:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="number">72</span>, <span class="number">60</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>]</span><br></pre></td></tr></table></figure>
<p>Remember how we said UTF-8 is a variable width system and can take
1-4 bytes? How do we know that the letters <code>H</code> and
<code>i</code> take 1 byte? It depends on the leading byte:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">0xxx xxxx    A single-byte US-ASCII code (from the first 127 characters)</span><br><span class="line">110x xxxx    One more byte follows</span><br><span class="line">1110 xxxx    Two more bytes follow</span><br><span class="line">1111 0xxx    Three more bytes follow</span><br></pre></td></tr></table></figure>
<p>An even better question is, how do know when the string ends? Our
strings will be null terminated. This means that when we start reading a
string, we consume bytes until we hit a <code>0</code>. In UTF-8, this
is not used for any other character, so we can use it to denote when a
string ends.</p>
<h2 id="string-constants">String Constants</h2>
<p>If we know what a string will be at compile-time, we can put it
directly in the assembly code. Handling user input is trickier and
something we’ll tackle later. I’m afraid I will have to go over a few
new concepts first, though.</p>
<h3 id="assembly-sections-or-segments">Assembly Sections (or
Segments)</h3>
<p>So far, we’ve been writing assembly top to bottom, putting any
instruction anywhere. Real assembly programs have multiple sections: the
text section and the data section.</p>
<blockquote>
<p>An assembly section is sometimes referred to as a segment.</p>
</blockquote>
<h3 id="data-section">Data Section</h3>
<p>This is the part of the program where we store constants.</p>
<h3 id="text-section">Text Section</h3>
<p>This section is sometimes referred to as the code section as well. It
holds the actual instructions.</p>
<h3 id="elf">ELF</h3>
<blockquote>
<p>In computing, the Executable and Linkable Format (ELF, formerly named
Extensible Linking Format), is a common standard file format for
executable files, object code, shared libraries, and core dumps. — <a
target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Executable_and_Linkable_Format">Wikipedia</a></p>
</blockquote>
<p>We need our own ELF, so to speak. That is, we need to define what
format the bytecode our assembler outputs will follow.</p>
<blockquote>
<p>We could probably use the ELF format, but that didn’t occur to me
when I was originally writing this part of the VM.</p>
</blockquote>
<h3 id="name">Name</h3>
<p>For now, I’m going to refer to the format as…​uh…​the PIE format.
Please feel free to suggest other names. =)</p>
<h3 id="header">Header</h3>
<p>Let’s copy ELF for this part. ELF reserves the first 64 bytes, so we
will too. This will be the PIE Header.</p>
<blockquote>
<p>I like pie.</p>
</blockquote>
<p>Our header will follow this format:</p>
<ol type="1">
<li>4 bytes with a magic number to identify it as a PIE header</li>
<li>The 5th byte will tell us the version of the PIE format (always 1
for now)</li>
</ol>
<p>That’s all we’ll encode in the header for now, though we may add
bytes later. What should our magic number be? Let’s go with:
<code>[45, 50, 49, 45]</code>. This is <code>EPIE</code> in ASCII
written using hexadecimal notation.</p>
<h3 id="data-section-1">Data Section</h3>
<p>The data section will start at the 65th byte. This is the section
where things like string constants will be stored.</p>
<h3 id="code-section">Code Section</h3>
<p>All the <code>Instructions</code> will be here.</p>
<h3 id="distinguishing-sections">Distinguishing Sections</h3>
<p>How do we know at which byte the data section begins? Or the code
section? Simple! We encode the starting byte of the code section after
the ELF header.</p>
<p>Let’s say this is the header, the first 64 bytes of our program. (I
replaced writing a bunch of 0s with the …​)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[45, 50, 49, 45, 1, 0 ... 0]</span><br></pre></td></tr></table></figure>
<p>The next eight bytes will contain the byte at which the code section
starts. For example:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[0, 0, 0, 0, 0, 0, 0, 200]</span><br></pre></td></tr></table></figure>
<p>We now know the following:</p>
<ul>
<li>Bytes 0-63 are the ELF header</li>
<li>Bytes 64-71 contain the code start section ()</li>
<li>Bytes 72-199 contain the data section</li>
<li>Bytes 200-end contain the code section</li>
</ul>
<h2 id="assembler-directives">Assembler Directives</h2>
<p>The next new concept I’m going to introduce is directives. These are
instructions to the assembler to do something. Here’s how you create a
string constant in MIPS assembly:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_string: .asciiz &quot;Hello world&quot;</span><br></pre></td></tr></table></figure>
<p>Ignore the <code>my_string:</code> part for one second, we’ll talk
about it next. The directive is <code>.asciiz</code>, which in MIPS,
means create a null-terminated string. <code>.asciiz</code> creates one
that is not null-terminated. There are many, many, many more directives
in Intel x86 assembly.</p>
<p>If you are curious, you can check out these links:</p>
<ul>
<li><a
target="_blank" rel="noopener" href="http://students.cs.tamu.edu/tanzir/csce350/reference/assembler_dir.html">MIPS
Assembler Directives</a></li>
<li><a target="_blank" rel="noopener" href="https://web.mit.edu/gnu/doc/html/as_7.html">GNU Assembler
Directives</a></li>
</ul>
<p>The important thing to note is that sections are declared using
directives. This means our programs will start to be a bit more complex
and look like this:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">&lt;constants here&gt;</span><br><span class="line">.code</span><br><span class="line">&lt;instructions here&gt;</span><br></pre></td></tr></table></figure>
<h2 id="assembler-labels">Assembler Labels</h2>
<p>And now, the last new thing to learn! Assembler labels! These let you
label a constant or instruction and refer to it by that label elsewhere
in your code. In our language, we’ll define a label as:</p>
<ol type="1">
<li>A sequence of alphanumeric characters</li>
<li>They must start the line</li>
<li>Terminated by a <code>:</code></li>
<li>Labels can be referred to in the <code>code</code> section by
prefacing them with an <code>@</code></li>
</ol>
<p>A small example program that will work after we implement these might
look like:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">.data</span><br><span class="line">my_str: .asciiz &quot;Hello everyone&quot;</span><br><span class="line">.code</span><br><span class="line">prt @my_str</span><br></pre></td></tr></table></figure>
<blockquote>
<p>Yes, we’ll also be coding a new instruction, PRT</p>
</blockquote>
<h2 id="end">End</h2>
<p>Lots of new concepts, so I’ll end this here. In the next part, we’ll
implement labels!</p>
<p>refer to <a
target="_blank" rel="noopener" href="https://blog.subnetzero.io/post/building-language-vm-part-12/">building-language-vm</a></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://animenzzzzzz.github.io">Animenzzzzzz</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://animenzzzzzz.github.io/pages/build-your-own-vm/12/">https://animenzzzzzz.github.io/pages/build-your-own-vm/12/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://animenzzzzzz.github.io" target="_blank">My Dearest</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/virtual-machine/">virtual-machine</a></div><div class="post-share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="prev-post pull-left" href="/pages/build-your-own-vm/11/" title="Memory"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Memory</div></div></a><a class="next-post pull-right" href="/pages/build-your-own-vm/13/" title="Labels"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Labels</div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a href="/pages/build-your-own-vm/00/" title="Computer Hardware Crash Course"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-11-19</div><div class="title">Computer Hardware Crash Course</div></div></a><a href="/pages/build-your-own-vm/01/" title="Overview and a Simple VM"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-20</div><div class="title">Overview and a Simple VM</div></div></a><a href="/pages/build-your-own-vm/03/" title="More Basic Opcodes"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-20</div><div class="title">More Basic Opcodes</div></div></a><a href="/pages/build-your-own-vm/02/" title="Basic Opcodes"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-20</div><div class="title">Basic Opcodes</div></div></a><a href="/pages/build-your-own-vm/04/" title="Jumps"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-24</div><div class="title">Jumps</div></div></a><a href="/pages/build-your-own-vm/05/" title="Equality Checks"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-12-24</div><div class="title">Equality Checks</div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Animenzzzzzz</div><div class="author-info-description">向来如此，便对么？</div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">67</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">13</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">11</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Animenzzzzzz"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Animenzzzzzz" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:jinnianqianyin@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">嘿咻~嘿咻~</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#what-are-strings"><span class="toc-number">1.</span> <span class="toc-text">What are Strings?</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ascii"><span class="toc-number">1.1.</span> <span class="toc-text">ASCII</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#utf-8"><span class="toc-number">1.2.</span> <span class="toc-text">UTF-8</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#which-to-use"><span class="toc-number">1.3.</span> <span class="toc-text">Which to use…​</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#what-stored-strings-look-like"><span class="toc-number">2.</span> <span class="toc-text">What Stored Strings Look
Like</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#string-constants"><span class="toc-number">3.</span> <span class="toc-text">String Constants</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#assembly-sections-or-segments"><span class="toc-number">3.1.</span> <span class="toc-text">Assembly Sections (or
Segments)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#data-section"><span class="toc-number">3.2.</span> <span class="toc-text">Data Section</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#text-section"><span class="toc-number">3.3.</span> <span class="toc-text">Text Section</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#elf"><span class="toc-number">3.4.</span> <span class="toc-text">ELF</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#name"><span class="toc-number">3.5.</span> <span class="toc-text">Name</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#header"><span class="toc-number">3.6.</span> <span class="toc-text">Header</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#data-section-1"><span class="toc-number">3.7.</span> <span class="toc-text">Data Section</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#code-section"><span class="toc-number">3.8.</span> <span class="toc-text">Code Section</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#distinguishing-sections"><span class="toc-number">3.9.</span> <span class="toc-text">Distinguishing Sections</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#assembler-directives"><span class="toc-number">4.</span> <span class="toc-text">Assembler Directives</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#assembler-labels"><span class="toc-number">5.</span> <span class="toc-text">Assembler Labels</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#end"><span class="toc-number">6.</span> <span class="toc-text">End</span></a></li></ol></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By Animenzzzzzz</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"><script>(() => {
  const runMermaid = (ele) => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from(ele).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)
      const renderMermaid = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      // mermaid v9 and v10 compatibility
      typeof renderFn === 'string' ? renderMermaid(renderFn) : renderFn.then(({svg}) => renderMermaid(svg))
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return
    
    codeMermaidEle.forEach(ele => {
      const preEle = document.createElement('pre')
      preEle.className = 'mermaid-src'
      preEle.hidden = true
      preEle.textContent = ele.textContent
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.appendChild(preEle)
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaidFn)
  }
  
  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>